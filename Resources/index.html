<!DOCTYPE html>
<html lang="en">
	<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ID3 Classificator</title>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/cover.css" rel="stylesheet">
    <style type="text/css">.spin {-webkit-animation: spin 1.2s infinite linear; -moz-animation: spin 1.2s infinite linear; -o-animation: spin 1.2s infinite linear; animation: spin 1.2s infinite linear; -webkit-transform-origin: 50% 50%; transform-origin:50% 50%; -ms-transform-origin:50% 50%; /* IE 9 */ } @-moz-keyframes spin {from {-moz-transform: rotate(0deg); } to {-moz-transform: rotate(360deg); } } @-webkit-keyframes spin {from {-webkit-transform: rotate(0deg); } to {-webkit-transform: rotate(360deg); } } @keyframes spin {from {transform: rotate(0deg); } to {transform: rotate(360deg); } }</style>
  </head>
	<body>
		<div class="site-wrapper">

      <div class="site-wrapper-inner">

        <div class="cover-container">

          <div class="inner cover">
            <h1 class="cover-heading">ID3</h1>
            <p class="lead">
							<div id="message"></div>
            </p>
            <p class="lead">
              <form class="form-inline" role="form">
							  <div class="form-group">
							    <label class="col-sm-2 control-label">Dataset</label>
							  </div>
							  <div class="form-group">
							    <!-- <div class="col-sm-3"> -->
						    	<select class="form-control" id="datasets">
									</select>
							  </div>
							  <div class="form-group">
							    <!-- </div> -->
							    <!-- <div class="col-sm-3"> -->
              			<a href="#" class="btn btn-default" id="getDataset"><span class="glyphicon glyphicon-off"></span> Go</a>
							    <!-- </div> -->
							  </div>
							</form>
            </p>
          </div>

          <div class="mastfoot">
            <div class="inner">
              <p>Project for <a href="msc.icsd.aegean.gr/academics/fields/3-intelligent-information-systems/" target="_blank">Machine Learning</a>, by <a href="#">Vasilis Bankov</a>.</p>
            </div>
          </div>

        </div>

      </div>

    </div>
		<script type="text/python">
			import arff_parser
			window.arff = arff_parser.main
		</script>
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/underscore-min.js"></script>
		<script src="assets/js/bootstrap.min.js"></script>
		<script src="app/functions.js"></script>
		<script type="text/javascript">
			var menu = Ti.UI.createMenu(),
			fileItem = Ti.UI.createMenuItem('File'),
			exitItem = fileItem.addItem('Exit', function() {
			  if (confirm('Are you sure you want to quit?')) {
			    Ti.App.exit();
			  }
			});
			menu.appendItem(fileItem);
			Ti.UI.setMenu(menu);
		</script>
		<script type="text/javascript">
			$(function() {
        var resourcesDir = Ti.Filesystem.getResourcesDirectory();
        var dir = Ti.Filesystem.getFile(resourcesDir+"\\data");
        var dir_files = dir.getDirectoryListing();
        for (var i=0;i<dir_files.length;i++){ 
        	var k = dir_files[i].name();
        	k = k.substring(k.length-5,k.length); 
          if(k==='.arff'){
          	var name = dir_files[i].name();
          	name = name.substring(0,name.length-5);
            $("#datasets").append('<option>'+name+'</option>');
          }
        }
        $('#getDataset').click(function(){
        	var selectedDataset = $('#datasets option:selected').text();
        	initialize(selectedDataset);
        });
	    });
		</script>
		<script type="text/javascript">
			function initialize(baseName){
				var targetClass = 'play',
						Dir = Ti.Filesystem.getResourcesDirectory(), // Dir = 'D:\\DEV\\repos\\tideSDK\\ID3\\Resources\\';
						dbFile = Dir+'/app.db';
						db = Ti.Database.openFile(dbFile);//Ti.App.appURLToPath("app://app.db")),
						infoGains = []
						dataModel={};
				switch(baseName){
					case 'car':
						targetClass = 'class',
					default: 
						targetClass = 'play' 
				}
				parseArff(baseName);
				populateDB(db,baseName,data);
				setSize = getSetSize(baseName);
				setEntropy = entropy(baseName,targetClass);
				// LOG('setEntropy is '+setEntropy+'<br>');
				// informationGain(baseName,targetClass,'windy');
				Root = maxGain(baseName,data,targetClass);
				$('#message').append('<h2>Set is '+baseName+'</h2>');
				$('#message').append('<h2>Root is '+Root.attribute+' with Gain = '+Root.infoGain+'</h2>');
				// for(i in Root.Attribute.PossibleValues){ max with conditions }



				// close db connection
				db.close();
			}
		</script>
	</body>
</html>